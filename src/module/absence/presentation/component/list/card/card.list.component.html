<div class="flex flex-col gap-4 my-4" [class.h-[calc(100vh-134px)]]="!tableState().items.length">
	@for(item of tableState().items; track item._id) {
		<bee-card class="text-sm border-2 border-transparent hover:border-blue-500" [class.!border-green-500]="selectedIds.includes(item._id)">
			<div class="flex justify-between items-center gap-8">

				<div (click)="singleClick(item)" class="flex justify-between">
					<div class="flex-1">
						<div>
							{{ 'absence.form.inputs.type.label' | translate }}
						</div>
						<div class="font-bold flex gap-2">
							{{ ('absence.type.' + item.type + '.label') | translate }}
						</div>
					</div>
				</div>
				<div class="flex items-center gap-2">

					<div>

						@if (item.active) {
							@switch (item.start | absenceProgressStatus: item.end) {

								@case (absenceProgressStatusEnum.FINISHED) {
									<span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-teal-100 text-teal-800 dark:bg-teal-800/30 dark:text-teal-500">
								{{ 'absence.progress.status.finished' | translate }}
							</span>
								}
								@case (absenceProgressStatusEnum.IN_PROGRESS) {
									<span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-800/30 dark:text-yellow-500">
								{{ 'absence.progress.status.inProgress' | translate }}
							</span>
								}
								@case (absenceProgressStatusEnum.NOT_STARTED) {
									<span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800/30 dark:text-blue-500">
								{{ 'absence.progress.status.notStarted' | translate }}
							</span>
								}

							}
						} @else {
							<span class="inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-800/30 dark:text-red-500">
							{{ 'absence.progress.status.cancel' | translate }}
						</span>
						}
					</div>

					@if (tableService.showAction.state$ | async) {

						<app-absence-row-action-button-component
							[item]="item"
							[id]="item._id"/>
					}

					@if (tableService.showSelectedStatus.state$ | async) {

						<div (click)="singleClick(item)">
							@if (selectedIds.includes(item._id)) {
								<div
									class="w-full border border-green-200 bg-green-50 text-green-600 px-2 py-1 rounded-2xl">
									{{ 'keyword.capitalize.selected' | translate }}
								</div>
							} @else {
								<div
									class="w-full border border-blue-200 bg-blue-50 text-blue-600 px-2 py-1 rounded-2xl">
									{{ 'keyword.capitalize.select' | translate }}
								</div>
							}
						</div>
					}
				</div>
			</div>
			<div (click)="singleClick(item)" class="grid grid-cols-2 gap-2">

				<div class="flex justify-between">
					<div class="flex-1">
						<div>
							{{ 'keyword.capitalize.start' | translate }}
						</div>
						<div class="font-bold">
							{{ item.start | dynamicDate }}
						</div>
					</div>
				</div>
				<div class="flex justify-between">
					<div class="flex-1">
						<div>
							{{ 'keyword.capitalize.end' | translate }}
						</div>
						<div class="font-bold">
							{{ item.end | dynamicDate }}
						</div>
					</div>
				</div>
			</div>
			<div (click)="singleClick(item)" class="flex justify-between">
				<div class="flex-1">
					<div>
						{{ 'keyword.capitalize.attendees' | translate }}
					</div>
					<div class="font-bold">
						@if (item.entireBusiness) {

							{{ 'absence.form.inputs.entireBusiness.label' | translate }}
						} @else {

							{{ item?.members?.length ?? 0 }}
						}
					</div>
				</div>
			</div>
			<div (click)="singleClick(item)" class="flex justify-between">
				<div class="flex-1">
					<div>
						{{ 'keyword.capitalize.note' | translate }}
					</div>
					<div class="font-bold">
						{{ item.note | noData }}
					</div>
				</div>
			</div>
			<div (click)="singleClick(item)" class="grid grid-cols-2 gap-2">
				<div class="flex justify-between">
					<div class="flex-1">
						<div>
							{{ 'keyword.capitalize.updatedAt' | translate }}
						</div>
						<div class="font-bold">
							{{ item.updatedAt | dynamicDate }}
						</div>
					</div>
				</div>
				<div class="flex justify-between">
					<div class="flex-1">
						<div>
							{{ 'keyword.capitalize.createdAt' | translate }}
						</div>
						<div class="font-bold">
							{{ item.createdAt | dynamicDate }}
						</div>
					</div>
				</div>
			</div>
		</bee-card>
	}
</div>
<utility-table-state-pagination-component
	[mobileMode]="true"
	(page)="pageChange($event)"
	[tableState]="tableState()"/>
