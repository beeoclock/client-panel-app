<div class="flex justify-between p-4">
  <event-filter-component></event-filter-component>
  <utility-dropdown [buttonLabel]="'keyword.capitalize.menu' | translate">
    <ng-container content>
      <a
        routerLink="form"
        class="block px-4 py-2 text-sm text-beeColor-700 dark:text-beeDarkColor-300 hover:bg-beeColor-200 dark:hover:bg-beeDarkColor-600" role="menuitem" tabindex="-1">
        <i class="bi bi-plus-lg"></i>
        {{ 'keyword.capitalize.add-event' | translate }}
      </a>
    </ng-container>
  </utility-dropdown>
</div>
<ng-container *ngIf="tableState$ | async as tableState">
  <table class="w-full text-sm text-left text-beeColor-500 dark:text-beeDarkColor-400">
    <thead class="text-xs text-beeColor-700 uppercase border-b border-beeColor-300 dark:border-beeDarkColor-700 dark:bg-beeDarkColor-800 dark:text-beeDarkColor-400">
    <tr>
      <th scope="col" class="p-4">
        <div class="flex items-center">
          <input id="checkbox-all" type="checkbox"
                 class="w-4 h-4 text-blue-600 bg-beeColor-100 border-beeColor-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-beeDarkColor-800 dark:focus:ring-offset-beeDarkColor-800 focus:ring-2 dark:bg-beeDarkColor-700 dark:border-beeDarkColor-300">
          <label for="checkbox-all" class="sr-only">checkbox</label>
        </div>
      </th>
      <th scope="col" class="px-6 py-3">
        {{ 'keyword.capitalize.attendees' | translate }}
      </th>
      <th scope="col" class="px-6 py-3">
        {{ 'event.keyword.capitalize.service' | translate }}
      </th>
      <th scope="col" class="px-6 py-3">
        {{ 'keyword.capitalize.duration' | translate }}
      </th>
      <th scope="col" class="px-6 py-3">
        {{ 'keyword.capitalize.price' | translate }}
      </th>
      <th scope="col" class="px-6 py-3" data-orderBy="start">
        {{ 'event.keyword.capitalize.start' | translate }}
        <utility-sort-indicator
          orderBy="start"
          [tableState]="tableState"
        ></utility-sort-indicator>
      </th>
      <th scope="col" class="px-6 py-3" data-orderBy="end">
        {{ 'event.keyword.capitalize.end' | translate }}
        <utility-sort-indicator
          orderBy="end"
          [tableState]="tableState"
        ></utility-sort-indicator>
      </th>
      <th scope="col" class="px-6 py-3" data-orderBy="status">
        {{ 'event.keyword.capitalize.status' | translate }}
        <utility-sort-indicator
          orderBy="status"
          [tableState]="tableState"
        ></utility-sort-indicator>
      </th>
      <th scope="col" class="px-6 py-3" data-orderBy="createdAt">
        {{ 'keyword.capitalize.createdAt' | translate }}
        <utility-sort-indicator
          orderBy="createdAt"
          [tableState]="tableState"
        ></utility-sort-indicator>
      </th>
      <th scope="col" class="px-6 py-3" data-orderBy="updatedAt">
        {{ 'keyword.capitalize.updatedAt' | translate }}
        <utility-sort-indicator
          orderBy="updatedAt"
          [tableState]="tableState"
        ></utility-sort-indicator>
      </th>
      <th scope="col" class="px-6 py-3 text-center">
        {{ 'keyword.capitalize.action' | translate }}
      </th>
    </tr>
    </thead>
    <tbody>
    <tr
      (click)="goToDetail(item._id)"
      class="bg-white border-b dark:bg-beeDarkColor-800 dark:border-beeDarkColor-700 hover:bg-beeColor-100 dark:hover:bg-beeDarkColor-900"
      *ngFor="let item of tableState.items">
      <td class="w-4 px-4 py-2">
        <div class="flex items-center">
          <input id="checkbox-table-1" type="checkbox"
                 class="w-4 h-4 text-blue-600 bg-beeColor-100 border-beeColor-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-beeDarkColor-800 dark:focus:ring-offset-beeDarkColor-800 focus:ring-2 dark:bg-beeDarkColor-700 dark:border-beeDarkColor-300">
          <label for="checkbox-table-1" class="sr-only">checkbox</label>
        </div>
      </td>
      <td class="px-6 py-2 text-beeColor-700 dark:text-beeDarkColor-100">
        <i class="bi bi-person"></i>
        {{ item?.attendees?.length }}
      </td>
      <td class="px-6 py-2 text-beeColor-700 dark:text-beeDarkColor-100">
        {{ item?.services?.[0]?.languageVersions?.[0]?.title }}
      </td>
      <td class="px-6 py-2 text-beeColor-700 dark:text-beeDarkColor-100">
        {{ formatDuration(item?.services?.[0]?.durationVersions?.[0]?.duration ?? '') }}
      </td>
      <td class="px-6 py-2 text-beeColor-700 dark:text-beeDarkColor-100">
        {{ item?.services?.[0]?.durationVersions?.[0]?.prices?.[0]?.price | currency: item.services?.[0]?.durationVersions?.[0]?.prices?.[0]?.currency: 'symbol-narrow'  }}
      </td>
      <td class="px-6 py-2 text-beeColor-700 dark:text-beeDarkColor-100">
        {{ (item.start ? (item.start | dynamicDate) : null) ?? 'Invalid Time' }}
      </td>
      <td class="px-6 py-2 text-beeColor-700 dark:text-beeDarkColor-100">
        {{ (item.end ? (item.end | dynamicDate) : null) ?? 'Invalid Time' }}
      </td>
      <td class="px-6 py-2 text-beeColor-700 dark:text-beeDarkColor-100">
        <div event-status-style [status]="item.status"></div>
      </td>
      <td class="px-6 py-2 text-beeColor-700 dark:text-beeDarkColor-100">
        {{ item.createdAt | dynamicDate }}
      </td>
      <td class="px-6 py-2 text-beeColor-700 dark:text-beeDarkColor-100">
        {{ item.updatedAt | dynamicDate }}
      </td>
      <td class="px-6 py-2 text-center text-beeColor-700 dark:text-beeDarkColor-100">
        <utility-table-column-action [id]="item._id!" (delete)="delete($event)"></utility-table-column-action>
      </td>
    </tr>

    </tbody>
  </table>
  <utility-table-state-pagination-component (clearCache)="clearTableCache()" (page)="pageChange($event)" [tableState]="tableState"></utility-table-state-pagination-component>
</ng-container>
