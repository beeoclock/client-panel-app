# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

#'on':
#  push:
#    branches:
#      - firebase

name: Deploy to Firebase Hosting on merge
'on': pull_request
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Install packages and build project
        run: npm ci && npm run build

      - name: Install firebase tools
        run: sudo npm install -g firebase-tools

      # 00000000000000
      - id: 'beeoclock_cloud_00000000000000'
        name: 'Authenticate to Google Cloud'
        uses: `google-github-actions/auth@v0.4.0'
        with:
          credentials_json: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_BEEOCLOCK_CLOUD_00000000000000 }}'
      - name: 'Echo project_id'
        run: '${{ steps.beeoclock_cloud_00000000000000.outputs.project_id }}'
#      - name: Update target project 00000000000000
#        run: firebase use beeoclock-cloud-00000000000000
#      - name: Deploy to firebase hosting
#        run: firebase deploy --only hosting:panel-beeoclock-cloud-00000000000000

      # 00000000000001
#      - name: Update target project 00000000000001
#        env:
#          GOOGLE_APPLICATION_CREDENTIALS: >-
#            ${{ secrets.FIREBASE_SERVICE_ACCOUNT_BEEOCLOCK_CLOUD_00000000000001
#            }}
#        run: firebase use beeoclock-cloud-00000000000001
#      - name: Deploy to firebase hosting
#        run: firebase deploy --only hosting:panel-beeoclock-cloud-00000000000001

      # 00000000000000
#      - uses: FirebaseExtended/action-hosting-deploy@v0
#        with:
#          repoToken: '${{ secrets.GITHUB_TOKEN }}'
#          firebaseServiceAccount: >-
#            ${{ secrets.FIREBASE_SERVICE_ACCOUNT_BEEOCLOCK_CLOUD_00000000000000
#            }}
#          channelId: live
#          projectId: beeoclock-cloud-00000000000000
#          target: panel-beeoclock-cloud-00000000000000

      # 00000000000001
      # - run: firebase target:apply hosting panel-beeoclock-cloud-00000000000001 beeoclock-cloud-00000000000001
#      - uses: FirebaseExtended/action-hosting-deploy@v0
#        with:
#          repoToken: '${{ secrets.GITHUB_TOKEN }}'
#          firebaseServiceAccount: >-
#            ${{ secrets.FIREBASE_SERVICE_ACCOUNT_BEEOCLOCK_CLOUD_00000000000001
#            }}
#          channelId: live
#          projectId: beeoclock-cloud-00000000000001
#          target: panel-beeoclock-cloud-00000000000001
