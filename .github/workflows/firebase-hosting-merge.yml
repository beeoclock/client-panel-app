# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Composer of Firebase Hosting Projects
'on':
  push:
    branches:
      - firebase
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Install packages and build project
        run: npm ci

      - name: Install firebase tools
        run: sudo npm install -g firebase-tools

      # Section: 00000000000000
      - id: 'auth_00000000000000'
        name: '00000000000000: Auth to Google & Change Firebase Target & Deploy to firebase hosting'
        uses: google-github-actions/auth@v0.4.0
        with:
          credentials_json: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_BEEOCLOCK_CLOUD_00000000000000 }}'
      - run: npm run ng build -- --configuration=beeoclock-cloud-00000000000000
      - run: firebase use beeoclock-cloud-00000000000000
      - run: firebase target:apply hosting panel-beeoclock-cloud-00000000000000 panel-beeoclock-cloud-00000000000000
      - run: firebase deploy --only hosting:panel-beeoclock-cloud-00000000000000
      - run: firebase deploy --only firestore:rules

      # Section: 00000000000001
      - id: 'auth_00000000000001'
        name: '00000000000001: Auth to Google & Change Firebase Target & Deploy to firebase hosting'
        uses: google-github-actions/auth@v0.4.0
        with:
          credentials_json: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_BEEOCLOCK_CLOUD_00000000000001 }}'
      - run: npm run ng build -- --configuration=beeoclock-cloud-00000000000001
      - run: firebase use beeoclock-cloud-00000000000001
      - run: firebase target:apply hosting panel-beeoclock-cloud-00000000000001 panel-beeoclock-cloud-00000000000001
      - run: firebase deploy --only hosting:panel-beeoclock-cloud-00000000000001
      - run: firebase deploy --only firestore:rules
